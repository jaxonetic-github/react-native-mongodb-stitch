Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _react=require('react');var React=_interopRequireWildcard(_react);var _reactRouter=require('react-router');var _shallowEqual2=require('fbjs/lib/shallowEqual');var _shallowEqual3=_interopRequireDefault(_shallowEqual2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i];}return target;}exports.default={create:function create(stackChildren,props){var history=props.history,children=props.children,render=props.render,rest=_objectWithoutProperties(props,['history','children','render']);return React.Children.toArray(stackChildren).reduce(function(stack,child){return[].concat(_toConsumableArray(stack),[_extends({},rest,child.props)]);},[]);},shallowEqual:function shallowEqual(oldStack,newStack){if(oldStack.length!==newStack.length)return false;return oldStack.every(function(oldItem,index){return(0,_shallowEqual3.default)(oldItem,newStack[index]);});},getHistoryEntries:function getHistoryEntries(stack,entries,location,historyIndex){var startHistoryIndex=entries.reduce(function(acc,entry,index){if(stack.find(function(item){return(0,_reactRouter.matchPath)(entry.pathname,item);})){if(acc===-1){return index;}return acc;}if(typeof historyIndex==='number'&&index>historyIndex){return acc;}return-1;},-1);var lastHistoryIndex=entries.reduce(function(acc,entry,index){if(index<startHistoryIndex&&typeof historyIndex==='number'&&index<=historyIndex){return-1;}if(location.pathname===entry.pathname){return index;}return acc;},-1);return entries.slice(startHistoryIndex,lastHistoryIndex+1);}};